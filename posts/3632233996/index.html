<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>test | Panda Wind's Blog</title><meta name="description" content="test"><meta name="keywords" content=""><meta name="author" content="Panda Wind"><meta name="copyright" content="Panda Wind"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="preconnect" href="//cdn.jsdelivr.net"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="test"><meta name="twitter:description" content="test"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta property="og:type" content="article"><meta property="og:title" content="test"><meta property="og:url" content="http://panda-wind.github.io/posts/3632233996/"><meta property="og:site_name" content="Panda Wind's Blog"><meta property="og:description" content="test"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = 'false'
var t = Cookies.get("theme");
if (autoChangeMode == '1'){
const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

if (t === undefined){
  if (isLightMode) activateLightMode()
  else if (isDarkMode) activateDarkMode()
  else if (isNotSpecified || hasNoSupport){
    console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
    now = new Date();
    hour = now.getHours();
    isNight = hour < 6 || hour >= 18
    isNight ? activateDarkMode() : activateLightMode()
}
} else if (t == 'light') activateLightMode()
else activateDarkMode()


} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="canonical" href="http://panda-wind.github.io/posts/3632233996/"><link rel="prev" title="JavaScript中==和===的原理" href="/http:/panda-wind.github.io/posts/1570400975/"><link rel="next" title="面试题" href="/http:/panda-wind.github.io/posts/1376120437/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://panda-wind.github.io/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  highlight_lang: 'true',
  highlight_shrink: 'false',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  copyright: {"languages":{"author":"作者: Panda Wind","link":"链接: http://panda-wind.github.io/posts/3632233996/","source":"来源: Panda Wind's Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  copy_copyright_js: true,
  ClickShowText: undefined,
  medium_zoom: 'true',
  Snackbar: undefined
  
}</script><meta name="generator" content="Hexo 4.1.0"></head><body><div id="header"> <div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Panda Wind's Blog</a></span><i class="fa fa-bars fa-fw toggle-menu pull_right close" aria-hidden="true"></i><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div></div><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="lazyload avatar_img" src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item is_center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">25</div></a></div></div><div class="mobile_data_item is_center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">10</div></a></div></div><div class="mobile_data_item is_center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">10</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/guestbook"><i class="fa-fw fa fa-coffee"></i><span> 留言板</span></a></div></div></div><div id="mobile-sidebar-toc"><div class="toc_mobile_headline">目录</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-1"><a class="toc_mobile_items-link" href="#SRM工作流使用文档"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">SRM工作流使用文档</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#1-功能列表"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">1. 功能列表</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#2-工作流配置"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">2. 工作流配置</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-1-流程分类"><span class="toc_mobile_items-number">1.2.1.</span> <span class="toc_mobile_items-text">2.1. 流程分类</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-1-流程分类维护"><span class="toc_mobile_items-number">1.2.1.1.</span> <span class="toc_mobile_items-text">2.1.1.流程分类维护</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-1-2-配置说明"><span class="toc_mobile_items-number">1.2.1.2.</span> <span class="toc_mobile_items-text">2.1.2.配置说明</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-2-流程单据"><span class="toc_mobile_items-number">1.2.2.</span> <span class="toc_mobile_items-text">2.2. 流程单据</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-2-1-维护流程单据"><span class="toc_mobile_items-number">1.2.2.1.</span> <span class="toc_mobile_items-text">2.2.1.维护流程单据</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-3-接口定义"><span class="toc_mobile_items-number">1.2.3.</span> <span class="toc_mobile_items-text">2.3. 接口定义</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-3-1-维护接口定义"><span class="toc_mobile_items-number">1.2.3.1.</span> <span class="toc_mobile_items-text">2.3.1.维护接口定义</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-4-服务定义"><span class="toc_mobile_items-number">1.2.4.</span> <span class="toc_mobile_items-text">2.4. 服务定义</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4-1-维护服务定义"><span class="toc_mobile_items-number">1.2.4.1.</span> <span class="toc_mobile_items-text">2.4.1.维护服务定义</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4-2-维护参数"><span class="toc_mobile_items-number">1.2.4.2.</span> <span class="toc_mobile_items-text">2.4.2.维护参数</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-4-3-流程变量介绍"><span class="toc_mobile_items-number">1.2.4.3.</span> <span class="toc_mobile_items-text">2.4.3.流程变量介绍</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-5-流程定义"><span class="toc_mobile_items-number">1.2.5.</span> <span class="toc_mobile_items-text">2.5. 流程定义</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-5-1-维护流程定义"><span class="toc_mobile_items-number">1.2.5.1.</span> <span class="toc_mobile_items-text">2.5.1.维护流程定义</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-5-2-流程定义节点配置详解"><span class="toc_mobile_items-number">1.2.5.2.</span> <span class="toc_mobile_items-text">2.5.2.流程定义节点配置详解</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-6-流程指定"><span class="toc_mobile_items-number">1.2.6.</span> <span class="toc_mobile_items-text">2.6. 流程指定</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-6-1-新建流程指定"><span class="toc_mobile_items-number">1.2.6.1.</span> <span class="toc_mobile_items-text">2.6.1.新建流程指定</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-6-2-变量配置"><span class="toc_mobile_items-number">1.2.6.2.</span> <span class="toc_mobile_items-text">2.6.2.变量配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-6-3-规则配置"><span class="toc_mobile_items-number">1.2.6.3.</span> <span class="toc_mobile_items-text">2.6.3.规则配置</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#2-6-4-流程指定执行规则"><span class="toc_mobile_items-number">1.2.6.4.</span> <span class="toc_mobile_items-text">2.6.4.流程指定执行规则</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-7-流程监控"><span class="toc_mobile_items-number">1.2.7.</span> <span class="toc_mobile_items-text">2.7. 流程监控</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-8-流程启动"><span class="toc_mobile_items-number">1.2.8.</span> <span class="toc_mobile_items-text">2.8. 流程启动</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-9-流程转交"><span class="toc_mobile_items-number">1.2.9.</span> <span class="toc_mobile_items-text">2.9. 流程转交</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#2-10-公司级流程监控"><span class="toc_mobile_items-number">1.2.10.</span> <span class="toc_mobile_items-text">2.10. 公司级流程监控</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#3-我的工作流"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">3.我的工作流</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-1-我的待办事项"><span class="toc_mobile_items-number">1.3.1.</span> <span class="toc_mobile_items-text">3.1.我的待办事项</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-2-我发起的流程"><span class="toc_mobile_items-number">1.3.2.</span> <span class="toc_mobile_items-text">3.2. 我发起的流程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-3-我参与的流程"><span class="toc_mobile_items-number">1.3.3.</span> <span class="toc_mobile_items-text">3.3. 我参与的流程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-4-我的抄送流程"><span class="toc_mobile_items-number">1.3.4.</span> <span class="toc_mobile_items-text">3.4. 我的抄送流程</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#3-5-自动处理规则"><span class="toc_mobile_items-number">1.3.5.</span> <span class="toc_mobile_items-text">3.5. 自动处理规则</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#4-常见错误整理"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">4.常见错误整理</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-1-流程定义部署报错"><span class="toc_mobile_items-number">1.4.1.</span> <span class="toc_mobile_items-text">4.1.流程定义部署报错</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-2-待办审批报错"><span class="toc_mobile_items-number">1.4.2.</span> <span class="toc_mobile_items-text">4.2.待办审批报错</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#4-3-触发工作流报错"><span class="toc_mobile_items-number">1.4.3.</span> <span class="toc_mobile_items-text">4.3.触发工作流报错</span></a></li></ol></li></ol></li></ol></div></div><div id="body-wrap"><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true">     </i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SRM工作流使用文档"><span class="toc-number">1.</span> <span class="toc-text">SRM工作流使用文档</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-功能列表"><span class="toc-number">1.1.</span> <span class="toc-text">1. 功能列表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-工作流配置"><span class="toc-number">1.2.</span> <span class="toc-text">2. 工作流配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-流程分类"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1. 流程分类</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-1-流程分类维护"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">2.1.1.流程分类维护</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-2-配置说明"><span class="toc-number">1.2.1.2.</span> <span class="toc-text">2.1.2.配置说明</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-流程单据"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2. 流程单据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-1-维护流程单据"><span class="toc-number">1.2.2.1.</span> <span class="toc-text">2.2.1.维护流程单据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3-接口定义"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3. 接口定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-1-维护接口定义"><span class="toc-number">1.2.3.1.</span> <span class="toc-text">2.3.1.维护接口定义</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-4-服务定义"><span class="toc-number">1.2.4.</span> <span class="toc-text">2.4. 服务定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-1-维护服务定义"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">2.4.1.维护服务定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-2-维护参数"><span class="toc-number">1.2.4.2.</span> <span class="toc-text">2.4.2.维护参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-3-流程变量介绍"><span class="toc-number">1.2.4.3.</span> <span class="toc-text">2.4.3.流程变量介绍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-5-流程定义"><span class="toc-number">1.2.5.</span> <span class="toc-text">2.5. 流程定义</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-1-维护流程定义"><span class="toc-number">1.2.5.1.</span> <span class="toc-text">2.5.1.维护流程定义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-2-流程定义节点配置详解"><span class="toc-number">1.2.5.2.</span> <span class="toc-text">2.5.2.流程定义节点配置详解</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-6-流程指定"><span class="toc-number">1.2.6.</span> <span class="toc-text">2.6. 流程指定</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-1-新建流程指定"><span class="toc-number">1.2.6.1.</span> <span class="toc-text">2.6.1.新建流程指定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-2-变量配置"><span class="toc-number">1.2.6.2.</span> <span class="toc-text">2.6.2.变量配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-3-规则配置"><span class="toc-number">1.2.6.3.</span> <span class="toc-text">2.6.3.规则配置</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-4-流程指定执行规则"><span class="toc-number">1.2.6.4.</span> <span class="toc-text">2.6.4.流程指定执行规则</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-7-流程监控"><span class="toc-number">1.2.7.</span> <span class="toc-text">2.7. 流程监控</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-8-流程启动"><span class="toc-number">1.2.8.</span> <span class="toc-text">2.8. 流程启动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-9-流程转交"><span class="toc-number">1.2.9.</span> <span class="toc-text">2.9. 流程转交</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-10-公司级流程监控"><span class="toc-number">1.2.10.</span> <span class="toc-text">2.10. 公司级流程监控</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-我的工作流"><span class="toc-number">1.3.</span> <span class="toc-text">3.我的工作流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1-我的待办事项"><span class="toc-number">1.3.1.</span> <span class="toc-text">3.1.我的待办事项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2-我发起的流程"><span class="toc-number">1.3.2.</span> <span class="toc-text">3.2. 我发起的流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-我参与的流程"><span class="toc-number">1.3.3.</span> <span class="toc-text">3.3. 我参与的流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-我的抄送流程"><span class="toc-number">1.3.4.</span> <span class="toc-text">3.4. 我的抄送流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-自动处理规则"><span class="toc-number">1.3.5.</span> <span class="toc-text">3.5. 自动处理规则</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-常见错误整理"><span class="toc-number">1.4.</span> <span class="toc-text">4.常见错误整理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-流程定义部署报错"><span class="toc-number">1.4.1.</span> <span class="toc-text">4.1.流程定义部署报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-待办审批报错"><span class="toc-number">1.4.2.</span> <span class="toc-text">4.2.待办审批报错</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-触发工作流报错"><span class="toc-number">1.4.3.</span> <span class="toc-text">4.3.触发工作流报错</span></a></li></ol></li></ol></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png)"><div id="post-info"><div id="post-title"><div class="posttitle">test</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-11-13<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-11-13</time><div class="post-meta-wordcount"><i class="fa fa-file-word-o post-meta__icon" aria-hidden="true"></i><span>字数总计: </span><span class="word-count">9.9k</span><span class="post-meta__separator">|</span><i class="fa fa-clock-o post-meta__icon" aria-hidden="true"></i><span>阅读时长: 30 分钟</span><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true">       </i><span>阅读量: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="SRM工作流使用文档"><a href="#SRM工作流使用文档" class="headerlink" title="SRM工作流使用文档"></a>SRM工作流使用文档</h1><h2 id="1-功能列表"><a href="#1-功能列表" class="headerlink" title="1. 功能列表"></a>1. 功能列表</h2><p>工作流模块是为了实现采购、合同、对账等企业业务操作流程审批自动化、智能化而设置的。其包括了SRM对于权限的控制，企业用户对于工作流的设置，是否任务会签审批，流程审批者动态指定，根据不同流程函告涉及到业务信息指示，前往不同流程任务节点，用户任务的审批方式，加签，转交，抄送，邮件审批等一系列，来达到企业定制化的审批流程。</p>
<style type="text/css" rel="stylesheet">
.table-area {
   overflow-x: scroll;
}
th, td {
    padding: 6px;
    min-width: 50px;
}
</style>

  <div class="table-area">
    <table>
        <thead>
            <tr>
                <th>功能菜单</th>
                <th>说明</th>
              <th>所需角色</th>
                <th>备注</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>流程分类</td>
                <td>流程分类是按照业务节点进行区分；</td>
                <td>租户管理员</td>
                <td></td>
            </tr>
            <tr>
                <td>流程单据</td>
                <td>流程单据配置审批表单、邮件审批、单据关联的流程变量等；</td>
                <td>租户管理员</td>
                <td></td>
            </tr>
            <tr>
                <td>接口定义</td>
                <td>配置查找审批人员规则、节点跳转方式、审批方式等等</td>
                <td>租户管理员</td>
              <td></td>
            </tr>
          <tr>
                <td>服务定义</td>
                <td>关联接口定义，可配置接口所需参数与流程变量的映射关系（包含工作流引擎内置的流程变量）</td>
                <td>租户管理员</td>
            <td></td>
            </tr>
          <tr>
                <td>流程定义</td>
                <td>图形化编辑工作流的审批链，单据的流转方式、具体审批人员等</td>
                <td>租户管理员</td>
            <td></td>
            </tr>
          <tr>
                <td>流程指定</td>
                <td>实现根据公司/订单类型/变更类型…等不同变量，个性化启动工作流</td>
                <td>租户管理员</td>
            <td></td>
            </tr>
          <tr>
                <td>流程启动</td>
                <td>输入参数手工启动工作流，用于开发测试流程部署后，是否可以走通流程；</td>
                <td>租户管理员</td>
                    <td>该菜单仅用于测试流程，不能用于正式环境</td>
            </tr>
          <tr>
                <td>流程监控</td>
                <td>监控启动的所有工作流，可恢复流程、终止流程。在流程审批报错后，可通过流程监控查看问题原因；</td>
                <td>租户管理员</td>
            <td></td>
            </tr>
          <tr>
                <td>流程转交</td>
                <td>查询出当前租户下所有审批中的流程，可将指定流程转交至指定人，可用于员工离职且改员工下挂有待办事项的情况；</td>
                <td>租户管理员</td>
                    <td>通常用于处理已离职员工下的待办事项</td>
            <td></td>
            </tr>
          <tr>
                <td>我的待办事项</td>
                <td>当前员工待办理的审批事项；</td>
                <td>有此菜单权限的角色</td>
            <td></td>
            </tr>
          <tr>
                <td>我发起的流程</td>
                <td>当前员工发起的所有流程；</td>
                <td>有此菜单权限的角色</td>
                    <td>只能查询到当前登录系统员工发起的工作流审批，包含已结束与未结束的</td>
            </tr>
          <tr>
                <td>我参与的流程</td>
                <td>包含我的待办事项、我发起的流程中的所有流程，已结束与未结束均可查询到；</td>
                <td>有此菜单权限的角色</td>
            <td></td>
            </tr>
          <tr>
                <td>我的抄送流程</td>
                <td>抄送到当前的员工的审批流程，只能查看抄送过来的流程；</td>
                <td>有此菜单权限的角色</td>
            <td></td>
            </tr>
          <tr>
                <td>自动转交设置</td>
                <td>员工可配置一段时间内，所有待审批流程转到其他员工进行审批；</td>
                <td>有此菜单权限的角色</td>
            <td></td>
            </tr>
          <tr>
                <td>自动处理规则</td>
                <td>可配置指定流程需要本人审批时自动同意或自动转交到指定人，配置规则有超时时间和固定时间；</td>
                <td>有此菜单权限的角色</td>
            <td></td>
            </tr>
        </tbody>
    </table>
</div>

<h2 id="2-工作流配置"><a href="#2-工作流配置" class="headerlink" title="2. 工作流配置"></a>2. 工作流配置</h2><h3 id="2-1-流程分类"><a href="#2-1-流程分类" class="headerlink" title="2.1. 流程分类"></a>2.1. 流程分类</h3><p>最小业务节点的分类。例如，送货单审批、送货单复审，为两个业务节点；</p>
<p><img alt="流程分类列表" data-src="images/%E6%B5%81%E7%A8%8B%E5%88%86%E7%B1%BB%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>预定义：SRM平台定义，所有租户只能查看，不能删除与编辑；</p>
<p>自定义：当预定义流程分类不满足需求时，租户自定义新建的；</p>
<h4 id="2-1-1-流程分类维护"><a href="#2-1-1-流程分类维护" class="headerlink" title="2.1.1.流程分类维护"></a>2.1.1.流程分类维护</h4><ul>
<li>点击<code>新建</code>，进入流程分类新建界面；</li>
</ul>
<p><img alt="新建流程分类" data-src="images/%E6%96%B0%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%88%86%E7%B1%BB.png" class="lazyload"></p>
<blockquote>
<ul>
<li>一个流程分类可关联多个流程单据；</li>
<li>流程单据非必输；</li>
</ul>
</blockquote>
<ul>
<li>新增流程单据、添加流程变量；    </li>
</ul>
<p><img alt="新建流程分类" data-src="images/%E6%96%B0%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%88%86%E7%B1%BB-%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F.png" class="lazyload"></p>
<blockquote>
<p><code>流程变量</code>中的字段名称和字段类型需要对应业务模块技术人员告知；</p>
</blockquote>
<h4 id="2-1-2-配置说明"><a href="#2-1-2-配置说明" class="headerlink" title="2.1.2.配置说明"></a>2.1.2.配置说明</h4><style type="text/css" rel="stylesheet">
.table-area {
   overflow-x: scroll;
}
th, td {
    padding: 6px;
    min-width: 50px;
}
</style>

<div class="table-area">
    <table>
        <thead>
            <tr>
                <th>字段</th>
                <th>必输</th>
              <th>含义</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>流程分类编码</td>
                <td>Y</td>
                <td>当前租户下编码唯一</td>
            </tr>
            <tr>
                <td>启用</td>
                <td>N</td>
                <td>默认启用</td>
            </tr>
            <tr>
                <td>流程单据</td>
                <td>N</td>
                <td>可配置多个流程单据，非必填</td>
            </tr>
          <tr>
                <td>流程变量</td>
                <td>N</td>
                <td>流程流转过程中使用的变量。在流程启动时，将会携带流程分类指定的变量值在流程运转中应用，如流程分类，定义了采购需求金额变量，所有这个分类下的流程都可以使用这个作为采购需求金额的变量进行使用；`字段类型`分为 `数字`、 `字符串`、 `布尔值`；`是否必输`表示流程启动时客户端该字段是否必传；</td>
        </tr></tbody>
    </table>
</div>

<h3 id="2-2-流程单据"><a href="#2-2-流程单据" class="headerlink" title="2.2. 流程单据"></a>2.2. 流程单据</h3><p>流程中所使用的业务单据，包含审批时所需的审批表单配置，邮件审批时所需的邮件审批配置；</p>
<p><img alt="流程单据列表" data-src="images/%E6%B5%81%E7%A8%8B%E5%8D%95%E6%8D%AE%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>预定义：SRM平台定义的，所有租户只能查看，不能删除与编辑；</p>
<p>自定义：预定义的不满足业务需求时，当前租户新建的；</p>
<p>点击 <code>编辑</code>，可查看平台定义的，用于租户定义流程单据时，作为参考；</p>
<h4 id="2-2-1-维护流程单据"><a href="#2-2-1-维护流程单据" class="headerlink" title="2.2.1.维护流程单据"></a>2.2.1.维护流程单据</h4><ul>
<li>点击<code>新建</code>，进入新建界面；</li>
</ul>
<p><img alt="新建流程单据" data-src="images/%E6%96%B0%E5%BB%BA%E6%B5%81%E7%A8%8B%E5%8D%95%E6%8D%AE.png" class="lazyload"></p>
<p>​配置流程单据编码、流程单据描述及所属的流程分类，默认启用；</p>
<blockquote>
<ul>
<li>一个单据可关联多个流程分类；</li>
<li>流程分类非必输；</li>
</ul>
</blockquote>
<ul>
<li>维护流程变量</li>
</ul>
<p><img alt="流程单据-流程变量" data-src="images/%E6%B5%81%E7%A8%8B%E5%8D%95%E6%8D%AE-%E6%B5%81%E7%A8%8B%E5%8F%98%E9%87%8F.png" class="lazyload"></p>
<p>​        此处定义的流程变量需要在启动工作流时由业务服务传入，工作流根据此处的<code>是否必输</code>校验启动参数，通常用于<code>服务定义</code>;</p>
<ul>
<li>维护流程表单</li>
</ul>
<p><img alt="流程单据-流程表单" data-src="images/%E6%B5%81%E7%A8%8B%E5%8D%95%E6%8D%AE-%E6%B5%81%E7%A8%8B%E8%A1%A8%E5%8D%95.png" class="lazyload"></p>
<p>同一单据可维护多个流程表单，用于不同节点的使用，可实现同一流程不同节点查看的流程表单不同；</p>
<blockquote>
<ul>
<li><p>审批表单的展示界面需每个模块技术单独开发；</p>
</li>
<li><p>一般情况下，流程表单都是只读，仅用于展示单据数据，PC 端表单 URL 必须以 <code>relative://</code> 作为前缀，表示此 URL 为相对路径；</p>
</li>
<li><p>若需配置可修改或需校验数据的审批表单，PC 端表单 URL 必须以 <code>include://</code> 作为前缀，<br>并且审批表单前端代码需提供用于校验或修改数据的相应函数，使用此方式在审批时如果报错会引发事务问题；</p>
</li>
</ul>
</blockquote>
<ul>
<li><p>流程表单前端配置  </p>
<ol>
<li>在前端路由文件中添加流程表单页面的路由配置。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">## 路由文件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  path: &#39;&#x2F;pub&#x2F;sfin&#x2F;approve-form&#39;, &#x2F;&#x2F; 流程表单页面的url</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  authorized: true, &#x2F;&#x2F; 必加，用于pub路由的访问</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  models: [() &#x3D;&gt; import(&#39;..&#x2F;models&#x2F;sfin&#x2F;modelB.js&#39;)], &#x2F;&#x2F;流程表单页面用到的model</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  component: () &#x3D;&gt; import(&#39;..&#x2F;routes&#x2F;sfin&#x2F;ComponentA&#39;), &#x2F;&#x2F;流程表单页面组件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#125;,</span></pre></td></tr></table></figure></li>
<li>若前端是微前端模式，则需要在前端模块根目录下的<code>hzerorc.js</code>中添加<code>hwfp</code>路由的配置。<br><img alt="流程单据-流程表单" data-src="images/%E6%B5%81%E7%A8%8B%E8%A1%A8%E5%8D%95-%E5%89%8D%E7%AB%AF%E8%B7%AF%E7%94%B1%E9%85%8D%E7%BD%AE.png" class="lazyload"></li>
<li>若PC端表单URL以<code>include://</code>作为前缀，则需要在前端模块下的<code>src</code>目录下新建<code>customize</code>目录，添加<code>index.js</code>，用作流程表单的配置文件,参照以下方式配置流程表单。<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">## src&#x2F;customize&#x2F;index.js</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 引入 存储 卡片配置的方法</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">import &#123; setWorkflowApproveForm &#125; from &#39;hzero-front&#x2F;lib&#x2F;customize&#x2F;workflowApproveForm&#39;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 引入 加载 model 的包装方法</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">import &#123; dynamicWrapper &#125; from &#39;..&#x2F;utils&#x2F;router&#39;;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 设置 编码为 SFIN.APPROVE_FORM_A 的 流程表单</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">setWorkflowApproveForm(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">  code: &#39;SFIN.APPROVE_FORM_A&#39;, &#x2F;&#x2F; 流程单据内配置的流程单据编码</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">  component: async () &#x3D;&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    return dynamicWrapper(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">      window.dvaApp,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">      [&#39;sfin&#x2F;modelA&#39;, &#39;sfin&#x2F;modelB&#39;], &#x2F;&#x2F; 流程表单页面用到的model</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">      () &#x3D;&gt; import(&#39;..&#x2F;routes&#x2F;sfin&#x2F;ComponentA&#39;) &#x2F;&#x2F; 流程表单页面组件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    );</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">  &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 配置多个setWorkflowApproveForm即可配置多个流程表单</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">setWorkflowApproveForm(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">  code: &#39;SFIN.APPROVE_FORM_B&#39;, &#x2F;&#x2F; 流程单据内配置的流程单据编码</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">  component: async () &#x3D;&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    return dynamicWrapper(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">      window.dvaApp,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">      [&#39;sfin&#x2F;modelC&#39;, &#39;sfin&#x2F;modelD&#39;], &#x2F;&#x2F; 页面用到的model</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">      () &#x3D;&gt; import(&#39;..&#x2F;routes&#x2F;sfin&#x2F;ComponentB&#39;) &#x2F;&#x2F; 页面组件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">    );</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">  &#125;,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">&#125;);</span></pre></td></tr></table></figure></li>
<li>若PC端表单URL以<code>include://</code>作为前缀，需要流程表单页面前端代码提供回调函数，用于工作流审批页面点击审批按钮时进行回调，同时工作流审批页面会将审批结果以字符串形式传递给流程表单页面。相关实现方法请参照如下方式调整前端代码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">## 流程表单页面组件</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">export default class App &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  &#x2F;&#x2F; 在componentDidMount中注册submit回调函数</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  componentDidMount() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F; 从props中解构出onLoad函数</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    const &#123; onLoad &#125; &#x3D; this.props;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F; 使用onLoad函数注册submit回调函数</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    onLoad(&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">      submit: this.submit,</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">    &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">  &#x2F;**</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">  * submit回调函数用于工作流审批页面点击审批按钮时进行回调</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">  * </span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">  * @param &#123;string&#125; approveResult | 工作流审批页面的审批结果, Approved - 审批同意, Rejected - 审批拒绝</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">  *&#x2F;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">  submit(approveResult) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F; submit函数需返回一个Promise对象</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    return new Promise((resolve, reject) &#x3D;&gt; &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">      ...</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">    &#125;);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">  &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>维护邮件审批表单</p>
</li>
</ul>
<p>邮件审批表单，用于邮件审批待办事项，邮件的内容多以展示业务单据为主，便于审批人员进行审批；</p>
<p>以下为演示视频：</p>
<video id="video" width="720" height="400" controls>
      <source src="https://storage.going-link.com/video/%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B%E9%82%AE%E4%BB%B6%E5%AE%A1%E6%89%B9.mp4">
</video>

<p>以下为文字介绍：</p>
<p><img alt="邮件审批表单维护" data-src="images/%E9%82%AE%E4%BB%B6%E5%AE%A1%E6%89%B9%E8%A1%A8%E5%8D%95%E7%BB%B4%E6%8A%A4.png" class="lazyload"></p>
<blockquote>
<p>目前邮件审批由于邮件客户端有兼容性问题，已验证以下邮件客户端：</p>
<ul>
<li>网易邮箱大师（移动版）</li>
<li>Mac系统自带邮件客户端</li>
<li>FoxMail</li>
</ul>
</blockquote>
<p> <strong>数据来源</strong>：（非必输字段）</p>
<p>作用于数据渲染，调用服务获取数据信息， 如果模版内容需要数据渲染，以表达式进行渲染，如${json.prNum} prNum 为数据来源接口返回字段，json为后台默认的数据别名。</p>
<p> <strong>模版内容</strong></p>
<p>html 代码，用于邮件审批节点发送的邮件内容。</p>
<blockquote>
<ul>
<li>只须编写需要在邮件中展示的前端代码即可，如关联的订单数据;</li>
<li>若需要使用当前流程的流程变量，则须从 <code>procVar</code> 中获取；</li>
<li>若<code>模版内容</code>中需使用<code>数据来源</code>中的数据，则需从 <code>json</code> 中获取；</li>
<li>由于不同的客户端对 html 的编写要求不一，需要技术人员自行查询编写要求；</li>
</ul>
</blockquote>
<p> <strong>如何使用</strong></p>
<ul>
<li>如下图，在人工节点点击<code>邮件审批表单</code>即可选择当前流程定义关联的流程单据配置的邮件审批模版；</li>
</ul>
<p><img alt="人工节点选择邮件模版" data-src="images/%E4%BA%BA%E5%B7%A5%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9%E9%82%AE%E4%BB%B6%E6%A8%A1%E7%89%88.png" class="lazyload"></p>
<ul>
<li><p>部署流程流程定义后即可生效；</p>
</li>
<li><p>触发该节点时，当前节点的审批人会收到如下图所示邮件。点击<code>同意</code>或<code>拒绝</code>后并输入审批意见，发送邮件即可；</p>
</li>
</ul>
<p><img alt="邮件审批表单效果图" data-src="images/%E9%82%AE%E4%BB%B6%E5%AE%A1%E6%89%B9%E8%A1%A8%E5%8D%95%E6%95%88%E6%9E%9C%E5%9B%BE.png" class="lazyload"></p>
<p><img alt="邮件审批回复" data-src="images/%E9%82%AE%E4%BB%B6%E5%AE%A1%E6%89%B9%E5%9B%9E%E5%A4%8D.png" class="lazyload"></p>
<ul>
<li>工作流在平台级定义了调度任务，会定时拉去邮件服务器数据，解析邮件审批相关邮件数据完成流程审批；</li>
</ul>
<blockquote>
<p>调度任务：工作流邮件审批任务(HWFP.MAIL_APPROVE_JOB)，执行周期为10分钟；</p>
</blockquote>
<h3 id="2-3-接口定义"><a href="#2-3-接口定义" class="headerlink" title="2.3. 接口定义"></a>2.3. 接口定义</h3><p>主要用于新建<code>远程调用</code>类型的<code>服务定义</code>使用；</p>
<p><img alt="接口定义列表" data-src="images/%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>预定义：SRM平台创建的接口定义；</p>
<p>自定义：针对当前租户创建的接口定义；</p>
<blockquote>
<p>接口定义对应的服务接口需保证幂等，即接口多次执行，执行结果一致；</p>
</blockquote>
<h4 id="2-3-1-维护接口定义"><a href="#2-3-1-维护接口定义" class="headerlink" title="2.3.1.维护接口定义"></a>2.3.1.维护接口定义</h4><ul>
<li>新建接口定义</li>
</ul>
<p><img alt="新建接口定义" data-src="images/%E6%96%B0%E5%BB%BA%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89.png" class="lazyload"></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>必输</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>接口编码</td>
<td>Y</td>
<td>租户下唯一</td>
</tr>
<tr>
<td>服务名称</td>
<td>Y</td>
<td>可选集成于 SRM 产品的所有服务</td>
</tr>
<tr>
<td>接口权限编码</td>
<td>Y</td>
<td>值集，可选择服务名称配置的服务的接口；</td>
</tr>
<tr>
<td>接口说明</td>
<td>N</td>
<td>默认使用服务接口的描述</td>
</tr>
<tr>
<td>启用</td>
<td>Y</td>
<td>默认启用</td>
</tr>
</tbody></table>
<ul>
<li>维护参数</li>
</ul>
<p><img alt="接口定义-参数" data-src="images/%E6%8E%A5%E5%8F%A3%E5%AE%9A%E4%B9%89-%E5%8F%82%E6%95%B0.png" class="lazyload"></p>
<table>
<thead>
<tr>
<th>字段</th>
<th>必输</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>参数名称</td>
<td>Y</td>
<td>接口所需参数的名称</td>
</tr>
<tr>
<td>参数类型</td>
<td>Y</td>
<td>接口参数类型，目前仅支持 <code>数字</code>、<code>字符串</code>、<code>布尔值</code>三种类型</td>
</tr>
<tr>
<td>参数描述</td>
<td>N</td>
<td>参数描述，非必输列</td>
</tr>
<tr>
<td>默认值</td>
<td>N</td>
<td>流程变量中不存在该字段时使用此配置，不建议使用，非必输列</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li><p>新建接口定义前需保证使用的接口已开发完成并将接口权限刷新到 <code>iam_permission</code> 表；</p>
</li>
<li><p>在<code>接口定义</code>和<code>参数</code>维护完成后，可使用右上方的<code>测试</code>按钮测试接口是否正常；</p>
</li>
</ul>
</blockquote>
<h3 id="2-4-服务定义"><a href="#2-4-服务定义" class="headerlink" title="2.4. 服务定义"></a>2.4. 服务定义</h3><p>服务定义用于流程定义的审批方式、审批规则、服务任务、监听器等；</p>
<p><img alt="服务定义列表" data-src="images/%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>预定义：SRM平台创建的服务定义，仅支持查看；</p>
<p>自定义：针对当前租户创建的服务定义，可编辑、删除；</p>
<h4 id="2-4-1-维护服务定义"><a href="#2-4-1-维护服务定义" class="headerlink" title="2.4.1.维护服务定义"></a>2.4.1.维护服务定义</h4><p><img alt="新建服务定义" data-src="images/%E6%96%B0%E5%BB%BA%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89.png" class="lazyload"></p>
<p>流程分类：改服务定义关联的流程分类，服务定义在具体的流程分类下，只有当前分类下可以使用定义的服务任务；</p>
<p>服务编码：租户下编码唯一；</p>
<p>服务方式：目前支持<code>远程调用</code>、<code>表达式</code>、<code>值集视图</code>三种方式；</p>
<blockquote>
<ul>
<li><p>远程调用</p>
<p>必须选择对应的<code>接口定义</code>，适用于较为复杂的逻辑，如通过订单上的采购品类查找对应的采购员进行审批、审批通过            后将单据审批状态改写、订单更改原始订单审批过程自动终止等；</p>
</li>
<li><p>表达式</p>
<p>流程变量之间通过操作符来完成校验判断，返回值为 <code>TRUE</code> 或 <code>FLASE</code>，多应用于跳转条件，支持复杂的逻辑判断。</p>
</li>
<li><p>值集视图</p>
<p>目前仅用于 <code>审批规则</code>，只能使用关联的值集为 <code>URL</code> 类型的值集视图，</p>
</li>
</ul>
</blockquote>
<p>服务方式：目前支持<code>审批方式</code>、<code>跳转条件</code>、<code>审批规则</code>、<code>服务任务</code>四种方式；</p>
<blockquote>
<ul>
<li><p>审批方式</p>
<p>对应人工节点中的审批方式配置项；</p>
</li>
<li><p>审批规则</p>
<p>对应人工节点中的审批规则配置项；</p>
<p>如果审批规则为远程调用，接口返回结果不能返回 <code>null</code>;</p>
</li>
<li><p>跳转条件</p>
<p>对应连接线上的跳转条件配置项；</p>
</li>
<li><p>服务任务</p>
<p>对应流程定义中的服务任务节点；</p>
</li>
</ul>
</blockquote>
<p>流程单据：该服务定义需要关联的流程单据，非必输项；</p>
<blockquote>
<p>配置后在维护<code>参数</code>时可选择到该流程单据中配置的<code>流程变量</code>，用于配置<code>参数</code>与<code>流程变量</code>的映射关系；</p>
</blockquote>
<p>服务描述：必输项；</p>
<h4 id="2-4-2-维护参数"><a href="#2-4-2-维护参数" class="headerlink" title="2.4.2.维护参数"></a>2.4.2.维护参数</h4><ul>
<li><p>远程调用</p>
<p>在选择完接口定义后会自动填充该配置，仅需配置其与流程变量的映射关系即可；</p>
</li>
<li><p>表达式</p>
<p>需配置执行表达式和参数相应的判断逻辑；</p>
</li>
</ul>
<p><img alt="服务定义-表达式" data-src="images/%E6%9C%8D%E5%8A%A1%E5%AE%9A%E4%B9%89-%E8%A1%A8%E8%BE%BE%E5%BC%8F.png" class="lazyload"></p>
<p>表达式：可按照参数的序号来写，通过 ()、&amp;&amp;、 || 等符号连接多个参数判断。点击参数可选择该流程分类下的所有参数，可以参数与常量判断，也可参数与变量进行判断；</p>
<p>审批结果表达式：配置方式同 <code>表达式</code>一致，但仅用于<code>审批方式</code>，用于在离开当前人工节点时计算审批结果，通常用于在流程结束时业务服务通过审批结果来修改业务单据状态；</p>
<blockquote>
<p>例如，如上图的审批方式，表达式为 <code>nrOfRejected &gt; 0</code> ，则审批结果表达式可配置为 <code>nrOfApproved == nrOfInstances</code> ，表示若 <code>同意总数等于审批总数</code>，则审批结果为 Approved (审批同意)，反之为 Rejected (审批拒绝)；</p>
</blockquote>
<p>序号：服务定义中的表达式配置项，若使用表达式中的数字，需同<code>表达式</code>一致；</p>
<blockquote>
<p>例如，上图中 <code>prType == &#39;TypeA&#39;</code>，在左边的表达式中就是 <code>2</code>，所以在 <code>参数</code> 配置中序号即位 2；</p>
</blockquote>
<p>左参数来源、有参数来源：目前支持<code>常量</code>、<code>流程变量</code>两种类型;</p>
<p>左参数值、右参数值：参数来源为<code>流程变量</code>时，可选择到当前<code>服务定义</code>关联的<code>流程分类</code>和<code>流程单据</code>中配置的所有的<code>流程变量</code>；</p>
<p>运算符：左参数与右参数的判断条件；</p>
<h4 id="2-4-3-流程变量介绍"><a href="#2-4-3-流程变量介绍" class="headerlink" title="2.4.3.流程变量介绍"></a>2.4.3.流程变量介绍</h4><table>
<thead>
<tr>
<th>参数名称</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>initiator</td>
<td>流程发起人</td>
</tr>
<tr>
<td>approveResult</td>
<td>审批结果，默认为最后一个审批人的审批结果</td>
</tr>
<tr>
<td>nrOfApproved</td>
<td>当前人工节点同意次数</td>
</tr>
<tr>
<td>nrOfRejected</td>
<td>当前人工节点拒绝次数</td>
</tr>
<tr>
<td>nrOfInstances</td>
<td>当前人工节点可审批次数</td>
</tr>
<tr>
<td>wflNum</td>
<td>审批方式变量，在审批方式为 <code>一定比例</code> 时使用，值在 <code>0～1</code> 之间</td>
</tr>
<tr>
<td>organizationId</td>
<td>租户标识</td>
</tr>
<tr>
<td>assignee</td>
<td>当前审批人</td>
</tr>
<tr>
<td>processName</td>
<td>流程名称</td>
</tr>
<tr>
<td>processDescription</td>
<td>流程描述</td>
</tr>
<tr>
<td>historyApprovers</td>
<td>流程历史审批人，包含之前审批过的所有人，没有去重，以逗号隔开</td>
</tr>
<tr>
<td>processInstanceBusinessKey</td>
<td>业务主键</td>
</tr>
<tr>
<td>contextArgs</td>
<td>消息模板参数，包含当前流程的所有流程变量，Map转Json</td>
</tr>
<tr>
<td>processInstanceStartTime</td>
<td>流程申请时间</td>
</tr>
<tr>
<td>processInstanceId</td>
<td>流程标识</td>
</tr>
<tr>
<td>previousApprover</td>
<td>上一节点审批人,多个审批人以英文逗号分隔</td>
</tr>
<tr>
<td>comment</td>
<td>当前审批人的审批意见</td>
</tr>
</tbody></table>
<blockquote>
<p>以上为工作流引擎内置的流程变量，若需要其他的流程变量联系工作流服务的负责人；</p>
<p>业务上的流程变量需要在对应的流程分类或流程单据中定义；</p>
</blockquote>
<h3 id="2-5-流程定义"><a href="#2-5-流程定义" class="headerlink" title="2.5. 流程定义"></a>2.5. 流程定义</h3><p>根据流程分类与流程单据，定义具体的审批流程；</p>
<p><img alt="流程定义列表" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<blockquote>
<ul>
<li><p>预定义的流程<code>不能编辑</code>、 <code>不能部署</code>，可以下载、复制并查看进行参考；</p>
</li>
<li><p>自定义的流程，可以编辑，在使用前需要<code>部署</code>才可以生效，每部署一次就会生成一个新的版本，各个版本之间互不影响，暂不支持恢复到之前的某个版本；</p>
</li>
<li><p>对于已存在的流程定义，仅能在编辑流程定义后再次查询后才能部署；</p>
</li>
<li><p>流程定义编辑器中使用的服务定义仅能查询到 <code>当前流程定义关联的流程分类</code> 及 <code>默认流程分类</code> 的服务定义；</p>
</li>
</ul>
</blockquote>
<h4 id="2-5-1-维护流程定义"><a href="#2-5-1-维护流程定义" class="headerlink" title="2.5.1.维护流程定义"></a>2.5.1.维护流程定义</h4><ul>
<li><p>维护方式</p>
<p><code>导入</code>、 <code>新建</code>、 <code>复制</code></p>
<ul>
<li><p>导入</p>
<p><img alt="流程定义-导入" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E5%AF%BC%E5%85%A5.png" class="lazyload"></p>
<blockquote>
<ul>
<li><p>导入的文件必须满足 <code>BPMN 2.0</code> 规范，否则导入报错；</p>
</li>
<li><p>流程编码<code>当前租户下唯一</code>，若已存在<code>相同编码</code>的流程，导入时会进行<code>覆盖</code>，覆盖时会校验<code>流程分类</code>和<code>流程单据</code>是否一致，不一致会直接抛错；</p>
</li>
<li><p><code>超时时间</code> 用于在待办超过配置的时间后提醒审批人进行审批使用，默认禁用；</p>
</li>
</ul>
</blockquote>
</li>
<li><p>新建<br><img alt="流程定义-新建" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E6%96%B0%E5%BB%BA.png" class="lazyload"></p>
<p>手动新建流程定义同导入基本一致，无需选择文件;</p>
</li>
<li><p>复制</p>
<p><img alt="流程定义-复制" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E5%A4%8D%E5%88%B6.png" class="lazyload"></p>
<p>如上图点击复制即可；</p>
<blockquote>
<p>目前复制后的流程定义不能将预定义流程定义中的节点配置同步过来，之后会优化该功能并支持此操作；</p>
</blockquote>
</li>
</ul>
</li>
<li><p>部署记录</p>
</li>
</ul>
<p><img alt="流程定义-部署记录" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E9%83%A8%E7%BD%B2%E8%AE%B0%E5%BD%95.png" class="lazyload"></p>
<p>主要用于将流程发起时间同发布记录时间比较来判断此流程处于那个版本；</p>
<ul>
<li>下载</li>
</ul>
<p><img alt="流程定义-下载" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E4%B8%8B%E8%BD%BD.png" class="lazyload"></p>
<p>下载即将已配置完成的流程定义导出为 <code>BPMN文件</code>，可用于各个环境间流程定义的迁移，简化配置时间；</p>
<blockquote>
<p>目前 <code>DEV</code> 环境导出的 <code>BMPN文件</code>会包含流程定义节点上所有的配置项，可同<code>导入</code>功能配合使用；</p>
</blockquote>
<ul>
<li>超时时间配置</li>
</ul>
<p><img alt="流程定义-超时时间" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E8%B6%85%E6%97%B6%E6%97%B6%E9%97%B4.png" class="lazyload"></p>
<p>用于该流程的待办超时未审批时通知审批人进行审批，超时时间单位目前仅支持<code>小时</code>、<code>天</code>，默认关闭；</p>
<h4 id="2-5-2-流程定义节点配置详解"><a href="#2-5-2-流程定义节点配置详解" class="headerlink" title="2.5.2.流程定义节点配置详解"></a>2.5.2.流程定义节点配置详解</h4><ul>
<li>编辑器界面介绍</li>
</ul>
<p><img alt="流程定义-编辑器" data-src="images/%E6%B5%81%E7%A8%8B%E5%AE%9A%E4%B9%89-%E7%BC%96%E8%BE%91%E5%99%A8.png" class="lazyload"></p>
<ul>
<li><p>开始节点</p>
<p>标志流程开始，有且仅有一个开始节点，存在多个时，则在部署流程时报错 ；</p>
</li>
</ul>
<p><img alt="开始节点" data-src="images/%E5%BC%80%E5%A7%8B%E8%8A%82%E7%82%B9.png" class="lazyload"></p>
<p>名称：审批中显示的节点名称；</p>
<p>流程表单：即当前流程定义关联的<code>流程单据</code>中配置的<code>所有流程表单</code>，用于在待办办理界面展示<code>业务单据</code>使用，在<code>我发起的流程</code>、<code>我参与的流程</code>、<code>流程监控</code>等菜单中会使用此节点中配置的流程表单；</p>
<p>合并审批历史：用于将当前流程（未结束）的审批记录与相同 <code>businessKey</code> 的流程（已结束）的审批历史合并，默认关闭；</p>
<p>自行审批时自动同意：启用时，若当前人工任务的 <code>审批人</code>包含 <code>流程申请人</code>，则 <code>自动审批（审批同意）</code>，默认关闭；</p>
<p>监听器：展示当前流程关联的流程分类下所有服务方式为远程调用的服务定义，类型分为 <code>开始</code>和 <code>撤销</code>;</p>
<blockquote>
<p>执行时期：</p>
<ul>
<li><p>开始</p>
<p>流程发起时触发</p>
</li>
<li><p>撤销</p>
<p><code>我发起的流程</code>中点击<code>撤销</code>按钮s时、<code>流程监控</code>中点击<code>终止流程</code>时</p>
</li>
</ul>
</blockquote>
<p>表单属性：主要记录其他配置项的配置，业务人员可忽略此选项；</p>
<ul>
<li><p>人工任务</p>
<p>一般的业务流程大多都会有人的参与，因此人工任务就是最常用的任务，当流程到达人工任务时，人工任务会被分配到特定的用户；</p>
<blockquote>
<p>在部署流程定义时，默认会给人工任务添加一个<code>审批拒绝的跳转线</code>，指向<code>结束节点</code>；</p>
</blockquote>
</li>
</ul>
<p><img alt="人工节点" data-src="images/%E4%BA%BA%E5%B7%A5%E8%8A%82%E7%82%B9.png" class="lazyload"></p>
<p>名称：审批中显示的节点名称，例如，采购总监审批等；</p>
<p>审批方式：流程离开当前人工任务流转到下个节点的<code>判断条件</code>；</p>
<blockquote>
<ul>
<li><p>工作流默认提供<code>任一人</code>、<code>全部通过</code>、<code>一定比列</code>、<code>一票通过或拒绝</code>四种，默认为<code>任一人</code>;</p>
</li>
<li><p>审批方式通常为<code>表达式类型</code>的服务定义，也支持使用<code>远程调用</code>类型的服务定义；</p>
</li>
</ul>
</blockquote>
<p>审批方式变量：若审批方式为<code>一定义比例</code>时使用，其他审批方式均无效，需要配置为 <code>小数</code>。例如，当前节点审批人为5人，需要3人审批通过才能流转到下个节点，即可配置为 <code>0.6</code>，表示60%，旁边的加减按钮以 <code>0.1</code>递增或递减；</p>
<p>审批规则：用于获取当前节点的审批人列表，通常为远程调用类型的服务定义；</p>
<blockquote>
<p>工作流默认提供<code>申请者自己</code>、<code>指定人</code>、<code>指定岗位</code>等，当默认审批规则不满足需求时，在服务定义中创建即可；</p>
</blockquote>
<p>自动抄送：流程流转到该节点时需要抄送的员工列表，通常为远程调用类型的服务定义；</p>
<blockquote>
<p>工作流默认提供<code>申请者自己</code>、<code>指定人</code>、<code>指定岗位</code> 等，当默认审批规则不满足需求时，在服务定义中创建即可；</p>
</blockquote>
<p>审批动作配置：待办办理界面可展示的审批按钮，目前支持<code>审批同意</code>、<code>审批拒绝</code>、<code>转交</code>、<code>加签</code>、<code>驳回</code>五种按钮；</p>
<blockquote>
<ul>
<li><p>所有按钮都可点击旁边的 <code>铅笔</code> 图形 <code>自定义</code> 按钮名称；</p>
</li>
<li><p>因为第一个人工节点无需且无法驳回（包括转交后），所以即使勾选驳回按钮也不会展示；</p>
</li>
<li><p>加签后仅展示<code>审批同意</code>和<code>审批拒绝</code>按钮；</p>
</li>
</ul>
</blockquote>
<p>审批意见标题：用于自定义待办办理界面中审批意见标题；</p>
<p><img alt="审批意见" data-src="images/%E5%AE%A1%E6%89%B9%E6%84%8F%E8%A7%81.png" class="lazyload"></p>
<blockquote>
<p>用户审批待办输入审批意见，但还未审批并关闭当前Tab页时，工作流会保存之前输入的审批意见，便于再次审批；</p>
</blockquote>
<p>审批同意审批意见必输：用于待办审批点击审批通过时校验审批意见是否必输；</p>
<p>拒绝后通知审批人：在审批人拒绝人工任务时通知申请人（邮件+站内消息）；</p>
<blockquote>
<p>多人审批时，若多人审批拒绝则会多次通知申请人；</p>
</blockquote>
<p>已审批自动同意：若当前节点的审批人在之前已审批过其他节点，则自动审批（审批同意）；</p>
<p>允许撤回：启用时表示当前流程流转到该节点时可撤回，默认启用；</p>
<p>允许催办：启用时表示当前流程流转到该节点时可通过在 <code>我发起的流程</code> 中提醒审批人审批（站内消息），默认启用；</p>
<blockquote>
<p>24小时内仅能催办一次；</p>
</blockquote>
<p>流程表单：即当前流程定义关联的<code>流程单据</code>中配置的<code>所有流程表单</code>，不同人工任务节点可配置不同的审批表单，人工任务节点的流程表单仅用于<code>待办办理界面</code>使用；</p>
<p>邮件审批表单：当前流程关联的流程单据中配置的邮件审批表单，用于审批人通过邮件办理待办；</p>
<p>监听器：展示当前流程关联的流程分类下所有服务方式为远程调用的服务定义，类型分为 <code>创建</code>、 <code>分配</code>、 <code>完成</code>、 <code>删除</code>；</p>
<blockquote>
<p>执行时期：</p>
<p>创建：创建人工任务时</p>
<p>分配：给人工任务设置审批人时</p>
<p>完成：审批人办理待办事项时</p>
<p>删除：审批人办理待办事项后，工作流引擎删除人工任务时</p>
<p>在使用时，建议使用<code>分配</code>和<code>完成</code>两种类型；</p>
</blockquote>
<p>表单属性：主要记录其他配置项的配置，业务人员可忽略此选项；</p>
<ul>
<li><p>服务任务</p>
<p>该节点类似于人工任务中的监听器，用于远程调用业务服务接口，执行相关业务逻辑，仅能使用<code>远程调用</code>类型的服务定义；</p>
</li>
</ul>
<p><img alt="服务任务" data-src="images/%E6%9C%8D%E5%8A%A1%E4%BB%BB%E5%8A%A1.png" class="lazyload"></p>
<p>名称：当前节点名称；</p>
<p>异步：勾选后将异步执行，不会阻塞当前流程，默认禁用；</p>
<blockquote>
<p>不建议启用该选项，由于是异步执行，若服务任务执行报错流程将不会挂起，业务服务可能会存在脏数据；</p>
</blockquote>
<p>服务任务：选择<code>远程调用</code>类型的服务定义；</p>
<ul>
<li><p>结束节点</p>
<p>标示流程结束的节点，位于整个流程的最后，同一个流程可配置多个该节点；</p>
</li>
</ul>
<p><img alt="结束节点" data-src="images/%E7%BB%93%E6%9D%9F%E8%8A%82%E7%82%B9.png" class="lazyload"></p>
<p>名称：当前节点名称；</p>
<p>监听器：展示当前流程关联的流程分类下所有服务方式为远程调用的服务定义，仅有<code>结束</code>类型；</p>
<blockquote>
<p>执行时期：</p>
<p>结束：流程结束时</p>
</blockquote>
<ul>
<li><p>跳转线</p>
<p>用于连接流程中的每个节点，通过 <code>跳转条件</code> 控制流程走向；</p>
</li>
</ul>
<p><img alt="跳转线" data-src="images/%E8%B7%B3%E8%BD%AC%E7%BA%BF.png" class="lazyload"></p>
<p>名称：跳转线名称；</p>
<p>跳转条件：用于控制流程走向，多使用<code>表达式</code>类型的服务定义，亦可使用<code>远程调用</code>类型的服务定义；</p>
<blockquote>
<ul>
<li>当使用远程调用类型的服务定义时，接口的返回结果必须是<code>布尔值</code>，即 <code>true</code> 或 <code>false</code>；</li>
<li>不配置时默认为审批同意；</li>
</ul>
</blockquote>
<p>默认跳线：启用时，若当前节点的所有跳转线都不满足条件时，流程流转的方向；</p>
<blockquote>
<ul>
<li>启用时不能配置跳转条件；</li>
</ul>
</blockquote>
<ul>
<li><p>单一网关</p>
<p>用于连接跳转线，美化流程图，无实际作用；</p>
</li>
</ul>
<ul>
<li><p>并行网关</p>
<p>审批任务并行处理，配置时，需要在并行 <code>开始前</code> 与 <code>之后</code> 均增加并行网关；</p>
<p>并行网关开始和结束之间可使用上述所有节点，除<code>开始</code>和 <code>结束</code> 外；</p>
</li>
</ul>
<ul>
<li>流程图展示</li>
</ul>
<p><img alt="流程图展示" data-src="images/%E6%B5%81%E7%A8%8B%E5%9B%BE%E5%B1%95%E7%A4%BA.png" class="lazyload"></p>
<blockquote>
<p>节点的跳转线若有 <code>多条</code>，需配置 <code>跳转条件</code>，且所有跳转线的跳转条件需 <code>满足所有情况</code>，否则在审批该节点时会报错，可配置一条 <code>默认跳线</code>避免该情况；</p>
</blockquote>
<h3 id="2-6-流程指定"><a href="#2-6-流程指定" class="headerlink" title="2.6. 流程指定"></a>2.6. 流程指定</h3><p>流程启动时，根据流程变量与流程单据 找到多条流程，通过流程指定，可以满足业务中对订单的审批支持根据订单类型、公司等变量不同，使用不同的流程进行审批。（功能启用工作流审批，通过流程分类+单据启动）</p>
<h4 id="2-6-1-新建流程指定"><a href="#2-6-1-新建流程指定" class="headerlink" title="2.6.1.新建流程指定"></a>2.6.1.新建流程指定</h4><p><img alt="流程指定列表" data-src="images/%E6%B5%81%E7%A8%8B%E6%8C%87%E5%AE%9A%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>​    点击 <code>新建</code>，选择 <code>流程分类</code>及 <code>流程单据</code> 即可，相关描述在配置后会自动填充；</p>
<h4 id="2-6-2-变量配置"><a href="#2-6-2-变量配置" class="headerlink" title="2.6.2.变量配置"></a>2.6.2.变量配置</h4><p>选择流程分类与流程单据中的流程变量，配置需要通过哪个变量进行判断，<code>规则配置</code> 中使用此处配置的变量；</p>
<p><img alt="流程指定-变量配置" data-src="images/%E6%B5%81%E7%A8%8B%E6%8C%87%E5%AE%9A-%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE.png" class="lazyload"></p>
<p>序号：数字，不可重复，表明该字段生效的优先级，数字越大，优先级越高；</p>
<p>变量名称：流程单据及流程分类中配置的流程变量名称；</p>
<p>变量描述：变量名称选择后自动填充；</p>
<p>字段类型：支持 <code>文本框</code>、 <code>LOV</code>、 <code>数字</code> 、 <code>下拉框</code>;</p>
<p>数据来源：字段类型选择 <code>LOV</code> 与 <code>下拉框</code> 时，该配置项为选择对应的值集；</p>
<p>宽度：数字，表示当前变量在 <code>规则配置</code> 中的列宽；</p>
<h4 id="2-6-3-规则配置"><a href="#2-6-3-规则配置" class="headerlink" title="2.6.3.规则配置"></a>2.6.3.规则配置</h4><p>根据流程指定 <code>变量配置</code> 转置成表格的列字段，配置具体变量的值对应的审批流程；</p>
<p>例如，变量配置如下：</p>
<p><img alt="流程指定-变量配置列子" data-src="images/%E6%B5%81%E7%A8%8B%E6%8C%87%E5%AE%9A-%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE%E5%88%97%E5%AD%90.png" class="lazyload"></p>
<p>则规则配置界面如下：</p>
<p><img alt="流程指定-规则配置" data-src="images/%E6%B5%81%E7%A8%8B%E6%8C%87%E5%AE%9A-%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE.png" class="lazyload"></p>
<p>流程：选择当前流程分类及流程单据下流程定义；</p>
<p>默认流程发起人：在业务服务启动工作流时未设置流程发起人，则使用此配置，值为员工编码；</p>
<blockquote>
<ul>
<li><p>若在启动时需指定流程发起人，可设置此属性 <code>org.srm.workflow.api.dto.ProcessStartDTO#specifyUserId</code>，字段类型为Long；</p>
</li>
<li><p>优先级：specifyUserId &gt; 当前登陆用户 &gt; 规则配置的默认流程发起人；</p>
</li>
</ul>
</blockquote>
<h4 id="2-6-4-流程指定执行规则"><a href="#2-6-4-流程指定执行规则" class="headerlink" title="2.6.4.流程指定执行规则"></a>2.6.4.流程指定执行规则</h4><ol>
<li><p>流程启动传过来参数和流程规则里配置的值，选择匹配上的数量最多的一条；</p>
</li>
<li><p>匹配上多条规则，则选择匹配上的规则里变量优先级高的审批流程；</p>
</li>
<li><p>匹配数量相同，且优先级相同，则随机取一条审批流；</p>
</li>
<li><p>当变量值均匹配不上时，若存在变量值均为空的规则，则选择该条流程；反之无空白值且匹配不上，流程指定启动报错；</p>
</li>
</ol>
<p>例如，变量流程变量配置中配置了4个变量，第一个变量为公司、第二个为业务实体、第三个为采购组织、第四个为来源系统；流程指定配置有如下数据：</p>
<table>
<thead>
<tr>
<th>序号</th>
<th>公司</th>
<th>业务实体</th>
<th>采购组织</th>
<th>来源系统</th>
<th>流程</th>
<th>默认流程发起人</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>上海甄云</td>
<td>SAP A.G.</td>
<td>采购组织001</td>
<td>SRM</td>
<td>流程A</td>
<td>账户a</td>
</tr>
<tr>
<td>2</td>
<td>上海甄云</td>
<td>SAP A.G.</td>
<td></td>
<td></td>
<td>流程B</td>
<td>账户b</td>
</tr>
<tr>
<td>3</td>
<td></td>
<td>SAP A.G.</td>
<td></td>
<td>SRM</td>
<td>流程C</td>
<td>账户c</td>
</tr>
<tr>
<td>4</td>
<td>上海甄云</td>
<td>SAP A.G.</td>
<td></td>
<td></td>
<td>流程D</td>
<td>账户d</td>
</tr>
<tr>
<td>5</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td>流程E</td>
<td>账户d</td>
</tr>
</tbody></table>
<p>流程A字段值最多，最优先匹配，若匹配上选择流程A；</p>
<p>当某笔单据同时匹配上流程B、C、D变量值匹配数量相同，但变量【公司】较【业务实体】靠前，因为从流程B、D选择，流程B、D两个优先级均一致，所以随机选择一条；</p>
<p>流程E的变量值均为空，为默认流程，其优先级最低，当以上均未匹配时，选择该流程。</p>
<blockquote>
<p>在部署流程定义时，默认会给人工任务添加一个<code>审批拒绝的跳转线</code>，指向<code>结束节点</code>；</p>
<p><img alt="流程指定-规则配置-默认" data-src="images/%E6%B5%81%E7%A8%8B%E6%8C%87%E5%AE%9A-%E8%A7%84%E5%88%99%E9%85%8D%E7%BD%AE-%E9%BB%98%E8%AE%A4.png" class="lazyload"></p>
</blockquote>
<h3 id="2-7-流程监控"><a href="#2-7-流程监控" class="headerlink" title="2.7. 流程监控"></a>2.7. 流程监控</h3><p>流程监控用户管理员查看流程是否正常运行，排查流程运营的错误，如未找到审批人，执行监听器报错等；</p>
<p><img alt="流程监控列表" data-src="images/%E6%B5%81%E7%A8%8B%E7%9B%91%E6%8E%A7%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>对于挂起的流程，可根据报错原因不同，进行恢复流程、终止流程、指定审批人等操作；</p>
<p>具体的报错信息可点击 <code>异常信息</code> 查看；</p>
<h3 id="2-8-流程启动"><a href="#2-8-流程启动" class="headerlink" title="2.8. 流程启动"></a>2.8. 流程启动</h3><p>用于快速测试流程定义配置是否正确；</p>
<p><img alt="流程启动" data-src="images/%E6%B5%81%E7%A8%8B%E5%90%AF%E5%8A%A8.png" class="lazyload"></p>
<p>模拟用户：即流程发起人，非必填，默认当前用户；</p>
<p>业务主键：即 businessKey；</p>
<p>流程定义：LOV，可选择 <code>当前租户</code> 下 <code>已部署</code> 的所有流程定义；</p>
<p>参数：当前流程定义关联的流程分类及流程单据中配置的流程变量，在选择流程定义后会自动带出，此处需要填写必输的参数，否则启动           时报错；</p>
<p>在配置好之后点击 <code>启动</code> 按钮即可触发一条工作流；</p>
<blockquote>
<p>该菜单不使用 <code>流程指定</code> 配置;</p>
</blockquote>
<h3 id="2-9-流程转交"><a href="#2-9-流程转交" class="headerlink" title="2.9. 流程转交"></a>2.9. 流程转交</h3><p>主要用于将已离职员工下的待办事项转交至指定人审批；</p>
<p><img alt="流程转交列表" data-src="images/%E6%B5%81%E7%A8%8B%E8%BD%AC%E4%BA%A4%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p><img alt="流程转交-选择转交人" data-src="images/%E6%B5%81%E7%A8%8B%E8%BD%AC%E4%BA%A4-%E9%80%89%E6%8B%A9%E8%BD%AC%E4%BA%A4%E4%BA%BA.png" class="lazyload"></p>
<p>勾选需要转交处理的流程后，点击右上角的 <code>转交</code> 按钮，选择转交人，点击 <code>确定</code> 即可；</p>
<blockquote>
<ul>
<li><p>此列表仅查询出当前租户下审批状态为 <code>审批中</code> 的流程；</p>
</li>
<li><p><code>当前处理人</code> 查询条件可查询出所有员工，包含 <code>已离职</code>或 <code>已禁用</code>的员工；</p>
</li>
<li><p><code>转交人</code> 仅能查出当前租户下启用的员工；</p>
</li>
</ul>
</blockquote>
<h3 id="2-10-公司级流程监控"><a href="#2-10-公司级流程监控" class="headerlink" title="2.10. 公司级流程监控"></a>2.10. 公司级流程监控</h3><p>同 <code>流程监控</code> 菜单作用一致，不过仅能查询出当前用户所在公司（当前租户下）的所有流程；</p>
<h2 id="3-我的工作流"><a href="#3-我的工作流" class="headerlink" title="3.我的工作流"></a>3.我的工作流</h2><h3 id="3-1-我的待办事项"><a href="#3-1-我的待办事项" class="headerlink" title="3.1.我的待办事项"></a>3.1.我的待办事项</h3><p>用户登录系统使用工作流，列出当前员工等待处理的流程，点击 <code>办理</code> 会打开待办详情进行审批。</p>
<p>同时也会在工作台展示，待办理的工作流，可点击进入审批界面；</p>
<p><img alt="我的待办事项-工作台" data-src="images/%E6%88%91%E7%9A%84%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9-%E5%B7%A5%E4%BD%9C%E5%8F%B0.png" class="lazyload"></p>
<p><img alt="我的待办事项列表" data-src="images/%E6%88%91%E7%9A%84%E5%BE%85%E5%8A%9E%E4%BA%8B%E9%A1%B9%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>点击“办理”进入详情界面。办理详情界面，包含工作流审批事项、审批表单、审批历史及审批流程图；</p>
<p><img alt="待办详情" data-src="images/%E5%BE%85%E5%8A%9E%E8%AF%A6%E6%83%85.png" class="lazyload"></p>
<p><img alt="待办详情-审批记录" data-src="images/%E5%BE%85%E5%8A%9E%E8%AF%A6%E6%83%85-%E5%AE%A1%E6%89%B9%E8%AE%B0%E5%BD%95.png" class="lazyload"></p>
<blockquote>
<ul>
<li><p>当前审批人可将流程抄送给其他员工（会过滤当前审批人），每个人工审批节点都是可以抄送；</p>
</li>
<li><p>指定审批人：下一个人工任务节点为多人审批，且审批规则为 <code>任一人</code>，展示下一个节点配置的所有人员，当前结点可以选择多个员工；</p>
</li>
<li><p>上传附件：审批时用户可根据需要上传附件，用于审批，之后节点的审批人均可下载并浏览此附件；</p>
</li>
<li><p>最下方的审批按钮为流程定义 <code>人工任务</code>节点中配置的，若当前待办是通过 <code>加签</code>或 <code>同意并加签</code> 生成的，则进显示 <code>审批通过</code>及 <code>审批拒绝</code>；</p>
</li>
<li><p>若当前流程关联的 <code>业务单据</code> 之前 <code>已触发过工作流</code>，则审批界面就会显示 <code>审批历史Tab页</code>。当流程定义的 <code>开始节点</code>勾选了 <code>合并审批历史</code>，则此处会将审批记录和审批历史 <code>合并</code>；</p>
</li>
<li><p>若下一节点的审批规则为 <code>上一审批人指定</code>，在 <code>审批通过</code>或 <code>审批拒绝</code>时会校验是否 <code>选择指定审批人</code>；</p>
</li>
</ul>
</blockquote>
<h3 id="3-2-我发起的流程"><a href="#3-2-我发起的流程" class="headerlink" title="3.2. 我发起的流程"></a>3.2. 我发起的流程</h3><p>仅能查询出当前用户发起的所有流程，包含所有状态；</p>
<p><img alt="我发起的流程列表" data-src="images/%E6%88%91%E5%8F%91%E8%B5%B7%E7%9A%84%E6%B5%81%E7%A8%8B%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p><img alt="我发起的流程详情" data-src="images/%E6%88%91%E5%8F%91%E8%B5%B7%E7%9A%84%E6%B5%81%E7%A8%8B%E8%AF%A6%E6%83%85.png" class="lazyload"></p>
<blockquote>
<ul>
<li><p>撤销：该按钮仅在当前流程发起后 <code>无一人审批过</code>时展示，亦可进入 <code>详情</code> 点击 <code>撤销</code>，撤销后会执行 <code>开始节点撤销类型</code>的监听器；</p>
</li>
<li><p>催办：审批中的流程均可展示此按钮，24小时内仅能催办一次；</p>
</li>
</ul>
</blockquote>
<h3 id="3-3-我参与的流程"><a href="#3-3-我参与的流程" class="headerlink" title="3.3. 我参与的流程"></a>3.3. 我参与的流程</h3><p>可查询出当前用户处理过的所有流程，包含所有状态；</p>
<h3 id="3-4-我的抄送流程"><a href="#3-4-我的抄送流程" class="headerlink" title="3.4. 我的抄送流程"></a>3.4. 我的抄送流程</h3><p>展示流程审批过程中，其他用户审批时抄送给当前用户的事项；</p>
<h3 id="3-5-自动处理规则"><a href="#3-5-自动处理规则" class="headerlink" title="3.5. 自动处理规则"></a>3.5. 自动处理规则</h3><p>当前用户因休假或其他原因无法审批待办时，可针对某一流程定义在固定时间或额定时间内未审批时设置自动同意或自动转交；</p>
<p><img alt="自动处理规则列表" data-src="images/%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E8%A7%84%E5%88%99%E5%88%97%E8%A1%A8.png" class="lazyload"></p>
<p>输入查询条件找到需要配置的流程定义；</p>
<p><img alt="自动处理规则-配置界面" data-src="images/%E8%87%AA%E5%8A%A8%E5%A4%84%E7%90%86%E8%A7%84%E5%88%99-%E9%85%8D%E7%BD%AE%E7%95%8C%E9%9D%A2.png" class="lazyload"></p>
<blockquote>
<ul>
<li><p>处理条件分为 <code>固定时间</code> 及 <code>超时时间</code>，若为固定时间需配置 <code>结束时间</code>， <code>开始时间非必填</code>，默认为 <code>当天的 00:00:00</code>；若为超时时间需设置 <code>超时时间</code>，时间单位仅支持 <code>小时</code>、 <code>天</code> 、 <code>周</code>；</p>
</li>
<li><p>处理规则分为 <code>自动转交</code> 及 <code>自动同意</code>，若为自动转交时需设置 <code>转交人</code>，若为自动同意，可设置 <code>审批意见</code>（非必输）；</p>
</li>
</ul>
</blockquote>
<h2 id="4-常见错误整理"><a href="#4-常见错误整理" class="headerlink" title="4.常见错误整理"></a>4.常见错误整理</h2><h3 id="4-1-流程定义部署报错"><a href="#4-1-流程定义部署报错" class="headerlink" title="4.1.流程定义部署报错"></a>4.1.流程定义部署报错</h3><ul>
<li><p><img alt="image-20200710153456381" data-src="images/image-20200710153456381-2509078.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong><br>    没有配置流程图；</p>
<p><strong>解决方法：</strong><br>    进入编辑器，配置流程图即可；</p>
<ul>
<li><p><img alt="image-20200710154009482" data-src="images/image-20200710154009482.png" class="lazyload"></p>
</li>
</ul>
<p><img alt="image-20201012212716571.png" data-src="images/image-20201012212716571.png" class="lazyload"></p>
<p><strong>报错原因：</strong><br>    流程图中节点跳转线没有正确连接到下个节点；</p>
<p><strong>解决方法：</strong><br>    进入编辑器，修改流程图即可，点击跳转线，只有两端全部显示绿色才连接正确；</p>
<h3 id="4-2-待办审批报错"><a href="#4-2-待办审批报错" class="headerlink" title="4.2.待办审批报错"></a>4.2.待办审批报错</h3><ul>
<li><p><img alt="image-20200710154427380" data-src="images/image-20200710154427380.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    执行当前节点所有跳转线的跳转条件时，没有一个满足条件，导致工作流引擎无法判断流程走向；</p>
<blockquote>
<p>报错信息也可能是：<code>No outgoing sequence flow of the exclusive gateway &#39;sid-B75CE0D6-AF25-4C6F-BC23-2F8FCCDCDC6C&#39; could be selected for continuing the process</code></p>
</blockquote>
<p><strong>解决方法：</strong></p>
<p>​    根据业务场景重新配置节点的连出线，若配置了跳转条件，则需保证所有的跳转条件满足所有可能出现的情况；</p>
<p>​    可配置一条默认跳线（默认跳线不能配置跳转条件）；</p>
<ul>
<li><p><img alt="image-20200710155149258" data-src="images/image-20200710155149258.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    该报错指当前节点已经挂起，不能进行审批；</p>
<blockquote>
<p>在出现该报错之前一定出现其他报错导致当前流程被挂起，可在<code>流程监控</code>中查看 <code>异常信息</code> 获取原始报错信息；</p>
</blockquote>
<p><strong>解决方法：</strong></p>
<p>​    出现这种情况通常是执行监听器报错，先联系对应模块技术，通过<code>流程监控</code>的异常信息或者日志平台查看具体报错，通过报错信息都能得到对应的服务定义编码；</p>
<ul>
<li><p><img alt="image-20200710162839428.png" data-src="images/image-20200710162839428.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    执行人工任务的监听器或者服务任务报错；</p>
<p><strong>解决方法：</strong></p>
<p>​    异常信息中会打印出具体报错的服务定义编码和记录报错时间，之后通过查看对应服务的日志确定具体报错；</p>
<ul>
<li><p><img alt="image-20200710163352512" data-src="images/image-20200710163352512.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    流程变量中不存在<code>totalPrice</code>变量；</p>
<p><strong>解决办法：</strong></p>
<p>​    若该变量是启动工作流时传递的变量，请检查业务服务启动工作流代码；</p>
<p>​    若是在流程流转过程中通过监听器返回并保存在流程变量中，请检查对应监听器接口代码；</p>
<ul>
<li>审批报错，查看日志发现出现问题的跳转条件或者监听器在当前的流程定义中并没有配置；</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    当前运行中的流程定义版本不是最新版本；</p>
<p>​    例如，流程定义 <code>SCEC.PRODUCT_APPROVAL_SHELF</code> 在版本 <code>1</code> 中配置的跳转条件有问题，之后修改并重新部署，版本号为  <code>2</code>；</p>
<p>​    在重新部署之前，已经有人使用版本 <code>1</code> 触发了工作流，之后审批报错；</p>
<p><strong>解决方法：</strong></p>
<p>​    若在改流程的开始节点配置了<code>撤销类型</code>的监听器，可通过<code>流程监控</code>的<code>终止流程</code>按钮改写单据状态；</p>
<p>​    若没有配置，则无法处理这种情况，关联单据只能作废；</p>
<h3 id="4-3-触发工作流报错"><a href="#4-3-触发工作流报错" class="headerlink" title="4.3.触发工作流报错"></a>4.3.触发工作流报错</h3><ul>
<li><p><img alt="image-20200710162113179.png" data-src="images/image-20200710162113179.png" class="lazyload"></p>
</li>
</ul>
<p><strong>报错原因：</strong></p>
<p>​    通常为通过流程指定配置没有匹配到一条流程；</p>
<p><strong>解决方法：</strong></p>
<p>​    可查看工作流日志确定具体的报错原因；</p>
<p>​    检查流程指定配置是否正确；</p>
</div></article><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" data-sites="wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/posts/1570400975/"><img class="prev_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>JavaScript中==和===的原理</span></div></a></div><div class="next-post pull_right"><a href="/posts/1376120437/"><img class="next_cover lazyload" data-src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>面试题</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = true == true ? true : false;
var verify = true == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'wYE4Gb5Kn6QH3Upwd8RhU2Lb-gzGzoHsz',
  appKey:'1GjPPEUKsUP6AM2R7WflR5ye',
  placeholder:'欢迎交流讨论~',
  avatar:'mm',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></div><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2018 - 2021 By Panda Wind</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script async src="/js/search/local-search.js"></script><script id="canvas_nest" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="/js/third-party/canvas-nest.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>